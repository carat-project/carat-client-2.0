<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: model/HogBug.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: model/HogBug.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import ejs from "ejs";
import {Utilities} from "../helper/Utilities.js";
const fs = require("fs");

var Template = fs.readFileSync(__dirname + "/../template/hogBugCard.ejs", "utf-8");

 /**
 * @class HogBug
 * @summary Hog/bug cards with actions.
 */
class HogBug {

    constructor(data){
        // Prepare and reformat data
        data.label = Utilities.cutLabel(data.label, 20);
        data.benefitSubstrings = Utilities.splitTimeDrainString(data.benefit);
        data.benefit = data.benefitSubstrings.timeDrainPart;
        data.benefitError = data.benefitSubstrings.timeDrainErrorPart;
        data.killable = data.running &amp;&amp; data.killable;
        data.uninstallable = data.removable;
        data.id = Utilities.makeIdFromAppName(data.name, data.type);
        data.uninstallId = Utilities.makeIdFromAppName(data.name,data.type,"uninstall");
        data.closeId = Utilities.makeIdFromAppName(data.name,data.type,"close");

        this.data = data;

        // render template
        var html = ejs.render(Template, data);
        this.node =  this.createNode(html);
    }

    /**
     * @function
     * @instance
     * @returns {String} Id for the HTML-element id field.
     * @memberOf HogBug
     */
    getId() {
        return this.data.id;
    };

    /**
     * @function
     * @instance
     * @returns {String} Id for the close button
     HTML-element id field.
     * @memberOf HogBug
     */
    getCloseId() {
        return this.data.closeId;
    };

    /**
     * @function
     * @instance
     * @returns {String} Id for the uninstall button
     HTML-element id field.
     * @memberOf HogBug
     */
    getUninstallId() {
        return this.data.uninstallId;
    };

    /**
     * @function
     * @instance
     * @returns {Boolean} Whether or not this app is
     currently running.
     * @memberOf HogBug
     */
    getRunning() {
        return this.data.running;
    };

    /**
     * @function
     * @instance
     * @returns {String} The package name of this app
     for native plugin use.
     * @memberOf HogBug
     */
    getPackageName() {
        return this.data.packageName;
    }

    /**
     * @function
     * @instance
     * @returns {String} The name of the app that is
     displayed for the end user.
     * @memberOf HogBug
     */
    getLabel() {
        return this.data.label;
    };

    /**
     * @function
     * @instance
     * @returns {Boolean} Whether or not you can uninstall this app.
     * @memberOf HogBug
     */
    getUninstallable() {
        return this.data.uninstallable;
    };

    createNode(html) {
        var node = Utilities.makeDomNode(html);
        var closeButton = Utilities.findById(node, this.data.closeId);
        var uninstallButton = Utilities.findById(node, this.data.uninstallId);

        let _this = this;
        closeButton.addEventListener("click", function() {
            carat.killApp(_this.data.name, function(state) {
                closeButton.disabled = true;
                if(state == "Success") {
                    carat.showToast(_this.data.label + " closed");
                } else {
                    carat.showToast(_this.data.label + " couldn't be closed!");
                }
            });
        });

        uninstallButton.addEventListener("click", function() {
            carat.uninstallApp(_this.data.name, function(state) {
                console.log("Uninstalling app: " + state);
            });
        });

        if(window.localStorage.getItem(this.data.id) === "dismissed") {
            node.style.display = "none";
        } else {
            makeElemPanSwipable(node);
        }

        return node;
    }

    /**
     * @function
     * @instance
     * @returns {DOM-element} Rendered DOM element
     representing a hog or a bug.
     * @memberOf HogBug
     */
    render() {
        return this.node;
    };
}

export default HogBug;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Headerbar.html">Headerbar</a></li><li><a href="HogBug.html">HogBug</a></li><li><a href="HogBugCards.html">HogBugCards</a></li><li><a href="HomeCards.html">HomeCards</a></li><li><a href="InformationDialog.html">InformationDialog</a></li><li><a href="MainContent.html">MainContent</a></li><li><a href="MasterView.html">MasterView</a></li><li><a href="SettingCard.html">SettingCard</a></li><li><a href="SettingList.html">SettingList</a></li><li><a href="StatsCards.html">StatsCards</a></li><li><a href="SummaryContainer.html">SummaryContainer</a></li><li><a href="SummaryEntry.html">SummaryEntry</a></li></ul><h3>Namespaces</h3><ul><li><a href="Utilities.html">Utilities</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Fri Nov 27 2015 03:10:00 GMT+0200 (FLE Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
